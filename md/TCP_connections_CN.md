	
	tcp_connections负责处理多个tcp客户端实例,通过tcp对同盟的回放,来建立可靠链接.仅仅通过一个回放来链接同盟是不够可靠的,所以tcp_connections 提供了需要的抽象级别来管理多个回放.例如,它要确保如果一个回放失效,对节点的链接是不会受到影响的.这就是通过多于一个回放来链接其它节点完成的.

	tcp_connections位于tcp_client之上,net_crypto之下.

	在tcp_connections中,一个tcp链接被定义为通过一个或多个tcp回放对节点的链接.通过tcp_connections对另外一个节点链接,将会在tcp_connections中对节点创建一个拥有DHT公钥X的链接.我们知道的节点被链接的一些tcp回放,将会被关联到该节点.如果节点没有直接链接,这些回放将是节点通过onion模块发送给我们的那些.一旦链接直接建立,节点也将会发送一些回放,然而,那是被另外一个模块完成的.

	tcp_connections有一个列表存储了它链接到的所有的回放.它尝试保持链接到的回放的数,尽可能小的加载回放,来降低客户端的带宽使用.每个节点需要的tcp回放链接数量在toxcore中设置为3,最大设置为6.这些数字的原因是,1意味着没有备份的回放,2意味着只有一个.为了保证链接是可靠的,3看起来是个好的数字.最大的数字设置为6是因为被绑定到每个节点的最大的回放数.如果两个节点是被多于6个相同的回放互相链接的,因为其它的同盟,它们都需要被链接相同的回放数,这里这个最大值发挥作用.没有原因可以解释这个数字为什么是6,但是在toxcore中,它是期望数字（3）的最小的倍数,因为代码是这么假设的.

	如果必要,tcp_connectsions将会链接tcp回放,用它们发送onion包.这个只能用于在没有udp链接的网络中.当是udp链接,包仅会使用udp发送它们,因为用tcp回放发送它们是不可靠的.

	我们每次连接到的回放也同样的重要,因为这些回放被tcp节点用来给我们初始化一个链接.

	在toxcore,每一个客户端链接3个回放,即使没有tcp节点且onion是不被需要的.它可能对于仅链接这些回放是最优的,仅在toxcore实例化的时候,节点和我们通过tcp回放链接上.它取决于onion怎么样工作,实例化阶段之后,每一个节点在onion里面被查找,如果它们被找到,链接返回给它们请求信息（DHT公钥,TCP回放）,应该没有更多的节点通过tcp回放链接我们.这是一种降低tcp回放负载的方法,然而,更多的查找是被需要的 在它被实现之前.

	tcp_connections选择一个回放,只用它给其它的节点发送数据.之所以没有对每个节点选择一个随机的链接回放,因为它会降低两个节点的链接质量,对视频和音频的传输性能真的很差.因为这个原因,一个节点被选择并用它发送所有的数据.如果任何原因导致,没有更多的数据可以通过那个回放发送,下一个回放将会被使用.如果tcp socket满了或者回放不在被需要,这个会发生.如果它们超时或者它们变得无用了,回放被丢弃.（如果回放太多或者长时间没有被用来给一些回放数据）.


	在toxcore中tcp_connections仅包含一个让链接进入睡眠的机制.如果对节点udp实例的链接采用了tcp实例链接,tcp_connections 对于其它节点可能会放入睡眠状态.udp是net_crypto链接其它节点的首选方式.为了追踪udp connection中链接其它节点失败回放的踪迹,它们被tcp_connections保存,当链接放入睡眠状态的时候,一些被使用的冗余链接被保存,然后断开链接.将链接放入睡眠状态,同样所有的回放被链接保存,并移除链接.唤醒链接是相同的,用相同的参数创建一个新链接且恢复所有的回放.

	一种用于检测潜在的功能失调的回放的方法,尝试通过说谎表明它们正在链接一个节点,当它们不是或者恶意丢弃所有包,应该考虑中断网络.toxcore目前没有实现一个这样的系统,添加一个需要更多的查找,可能需要扩展协议.

	当tcp_connects链接回放,它将会为这个回放创建新的tcp_client 实例.在任何时候,如果tcp_client实例反映它链接失败,tcp 回放将会被丢弃.一旦tcp回放反映它链接上了,tcp_connections将会找到所有的关于回放的链接.对回放声明它想要通过路由请求链接它们每一个.如果回放反映,节点是在线链接,链接数和回放将会被用于发送数据.在数据包链接中,如果节点没有反应是在线,但是回放是关联链接的,tcp 00B包将会代替数据包被用于发送数据.tcp 00B包被用于这个例子中,有节点链接,但是它不向我们发送路由请求.

	tcp_connections 被作为单个tcp_client实例和net_crypto两者的桥梁 ,或者单个链接和看起来像一个链接的接口的桥梁使用.

